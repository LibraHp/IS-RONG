"use strict";const t=require("../../common/vendor.js"),e="https://ehre.top/api/",s={components:{uniList:()=>"../../components/uni-list/uni-list.js",uniListItem:()=>"../../components/uni-list-item/uni-list-item.js",Weather:()=>"../../components/weather/weather.js",musicPlayer:()=>"../../components/music/music.js"},data:()=>({postList:[],background:[],postText:""}),onLoad(){this.getList(),this.getMain()},onPullDownRefresh(){console.log("触发了下拉刷新"),setTimeout((()=>{this.getList(),t.index.stopPullDownRefresh()}),2e3)},methods:{async getList(){t.index.request({url:e+"posts",method:"get",dataType:"json",data:{page:1,pageSize:100},success:t=>{console.log(t.data.data),this.postList=t.data.data}}),t.index.showLoading({title:"加载中"}),setTimeout((function(){t.index.hideLoading()}),2e3)},onClick(e,s){t.index.navigateTo({url:"/pages/post/post?title="+e+"&text="+s})},async getMain(){t.index.request({url:e+"post?cid=170",method:"get",dataType:"json",success:t=>{var e=t.data.data.text.split(","),s=parseInt(e[0]);e[1],this.background[0]=e[2],this.background[1]=e[3],this.background[2]=e[4];var o=e[5];let n=parseInt(e[6]);this.putInfo(s,o,n)}})},getPostText(t){let e=t.split(";"),s="";return s=null==e[1]?e[0]?e[0]:"暂时没有简介了啦(●'◡'●)":e[1],s},putInfo(e,s,o){switch(e){case 1:t.index.showModal({title:"Tips",content:s,showCancel:!1,confirmText:"OK！"});break;case 2:plus.runtime.version.split(".").join("")<o&&t.index.showModal({title:"有更新啦！",content:s,showCancel:"取消",confirmText:"前往更新",success:function(t){t.confirm?plus.runtime.openURL("https://github.com/LibraHp/IS-RONG/releases"):t.cancel&&console.log("用户点击取消")}})}}}};if(!Array){(t.resolveComponent("uni-card")+t.resolveComponent("Weather")+t.resolveComponent("musicPlayer")+t.resolveComponent("uni-list"))()}Math||((()=>"../../components/uni-card/uni-card.js")+(()=>"../../components/uni-list/uni-list.js"))();const o=t._export_sfc(s,[["render",function(e,s,o,n,i,a){return{a:t.f(i.background,((e,s,o)=>({a:"7e8d4446-0-"+o,b:t.p({cover:e})}))),b:t.f(i.postList,((e,s,o)=>({a:t.t(a.getPostText(e.text)),b:t.o((t=>a.onClick(e.title,e.text)),s),c:"7e8d4446-4-"+o+",7e8d4446-3-"+o,d:t.p({title:e.title,"sub-title":`${e.year}-${e.month}-${e.day}`,extra:e.category,thumbnail:"/static/love.svg"}),e:s,f:"7e8d4446-3-"+o})))}}]]);wx.createPage(o);
