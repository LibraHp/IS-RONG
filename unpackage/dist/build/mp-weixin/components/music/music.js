"use strict";const t=require("../../common/vendor.js"),e=t.index.createInnerAudioContext();e.autoplay=!0;const s={components:{uCollapseItem:()=>"../uni-collapse-item/uni-collapse-item.js",uCollapse:()=>"../uni-collapse/uni-collapse.js",uniList:()=>"../uni-list/uni-list.js",uniListItem:()=>"../uni-list-item/uni-list-item.js"},data:()=>({playlist:[{title:"起风了",artist:"买辣椒也用券",cover:"https://p3.music.126.net/diGAyEmpymX8G7JcnElncQ==/109951163699673355.jpg?param=300x300",source:"https://music.163.com/song/media/outer/url?id=1330348068"},{title:"Star",artist:"XMASwu(吴骜)",cover:"http://p1.music.126.net/6-F8k6AuCnsvMjDNKYHriw==/109951166677305699.jpg?param=130y130",source:"https://music.163.com/song/media/outer/url?id=1899705498"}],currentTrackIndex:0,pause:"/static/music/pause.svg"}),mounted(){this.playCurrentTrack(),this.getMusicList(),e.onEnded((()=>{setTimeout((()=>{this.nextTrack()}),500)}))},methods:{getMusicList(){t.index.request({url:"https://ehre.top/api/getMusicList",method:"get",dataType:"json",success:t=>{this.playlist=t.data.data,console.log(t.data)}})},jumpTrack(t){this.currentTrackIndex=t,this.playCurrentTrack()},prevTrack(){this.currentTrackIndex=(this.currentTrackIndex+this.playlist.length-1)%this.playlist.length,this.playCurrentTrack()},nextTrack(){this.currentTrackIndex=(this.currentTrackIndex+1)%this.playlist.length,this.playCurrentTrack()},togglePlay(){e.paused?e.play():e.pause()},playCurrentTrack(){e.src=this.playlist[this.currentTrackIndex].source,e.play(),e.onPause((()=>{this.pause="/static/music/pause.svg"})),e.onPlay((()=>{this.pause="/static/music/play.svg"}))}}};if(!Array){(t.resolveComponent("uni-list-item")+t.resolveComponent("uni-list")+t.resolveComponent("uni-collapse-item")+t.resolveComponent("uni-collapse")+t.resolveComponent("uni-card"))()}Math||((()=>"../uni-list-item/uni-list-item.js")+(()=>"../uni-list/uni-list.js")+(()=>"../uni-collapse-item/uni-collapse-item.js")+(()=>"../uni-collapse/uni-collapse.js")+(()=>"../uni-card/uni-card.js"))();const i=t._export_sfc(s,[["render",function(e,s,i,a,n,r){return{a:t.f(n.playlist,((e,s,i)=>({a:t.o((t=>r.jumpTrack(s)),s),b:"2bb8575c-4-"+i+",2bb8575c-3-"+i,c:t.p({thumb:e.cover,title:e.title,clickable:!0}),d:s,e:"2bb8575c-3-"+i+",2bb8575c-2"}))),b:t.p({title:"MUSICLIST","show-animation":!0}),c:t.o((t=>r.prevTrack())),d:n.pause,e:t.o((t=>r.togglePlay())),f:t.o((t=>r.nextTrack())),g:t.p({title:n.playlist[n.currentTrackIndex].title,"sub-title":n.playlist[n.currentTrackIndex].artist,thumbnail:n.playlist[n.currentTrackIndex].cover})}}]]);wx.createComponent(i);
